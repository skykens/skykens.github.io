<!DOCTYPE html><html lang="ch" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>容器相关名词解释 | 现役程序员skykens的博客</title><meta name="author" content="Skykens,bohemia0508@gmail.com"><meta name="copyright" content="Skykens"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="容器相关名词解释Helm 和 ChartHelm 是一个 Kubernetes 应用的包管理工具，用来管理 chart——预先配置好的安装包资源，有点类似于 Ubuntu 的 APT 和 CentOS 中的 YUM。2019 年 11 月 13 日，Helm 3 发布，2020 年 4 月 30 日，从 CNCF 中毕业。本文基于 Helm 3。 Helm chart 是用来封装 Kubernet">
<meta property="og:type" content="article">
<meta property="og:title" content="容器相关名词解释">
<meta property="og:url" content="https://skykens.github.io/rong-qi-xiang-guan-ming-ci-jie-shi/index.html">
<meta property="og:site_name" content="现役程序员skykens的博客">
<meta property="og:description" content="容器相关名词解释Helm 和 ChartHelm 是一个 Kubernetes 应用的包管理工具，用来管理 chart——预先配置好的安装包资源，有点类似于 Ubuntu 的 APT 和 CentOS 中的 YUM。2019 年 11 月 13 日，Helm 3 发布，2020 年 4 月 30 日，从 CNCF 中毕业。本文基于 Helm 3。 Helm chart 是用来封装 Kubernet">
<meta property="og:locale">
<meta property="og:image" content="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-6oqzgq.jpg">
<meta property="article:published_time" content="2021-05-06T10:09:21.000Z">
<meta property="article:modified_time" content="2023-03-23T15:31:40.703Z">
<meta property="article:author" content="Skykens">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-6oqzgq.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://skykens.github.io/rong-qi-xiang-guan-ming-ci-jie-shi/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: Skykens","link":"Link: ","source":"Source: 现役程序员skykens的博客","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '容器相关名词解释',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-23 15:31:40'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="现役程序员skykens的博客" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/head.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">99</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">17</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目錄</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-6oqzgq.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">现役程序员skykens的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目錄</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">容器相关名词解释</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-05-06T10:09:21.000Z" title="Created 2021-05-06 10:09:21">2021-05-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-03-23T15:31:40.703Z" title="Updated 2023-03-23 15:31:40">2023-03-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="容器相关名词解释"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="容器相关名词解释"><a href="#容器相关名词解释" class="headerlink" title="容器相关名词解释"></a>容器相关名词解释</h1><h2 id="Helm-和-Chart"><a href="#Helm-和-Chart" class="headerlink" title="Helm 和 Chart"></a>Helm 和 Chart</h2><p><a target="_blank" rel="noopener" href="http://helm.sh/">Helm</a> 是一个 Kubernetes 应用的包管理工具，用来管理 <a target="_blank" rel="noopener" href="https://github.com/helm/charts">chart</a>——预先配置好的安装包资源，有点类似于 Ubuntu 的 APT 和 CentOS 中的 YUM。2019 年 11 月 13 日，<a target="_blank" rel="noopener" href="https://helm.sh/blog/helm-3-released/">Helm 3 发布</a>，2020 年 4 月 30 日，从 CNCF 中<a target="_blank" rel="noopener" href="https://helm.sh/blog/celebrating-helms-cncf-graduation/">毕业</a>。本文基于 Helm 3。</p>
<p>Helm chart 是用来封装 Kubernetes 原生应用程序的 YAML 文件，可以在你部署应用的时候自定义应用程序的一些 metadata，便与应用程序的分发。</p>
<p>Helm 和 chart 的主要作用是：</p>
<ul>
<li>应用程序封装</li>
<li>版本管理</li>
<li>依赖检查</li>
<li>便于应用程序分发</li>
</ul>
<p>下面是 Helm 的架构图。</p>
<p><img src="https://raw.githubusercontent.com/skykens/pubPhotos/main/helm-chart.png" alt="helm-chart"></p>
<p>Helm 可以安装本地或者远程的 chart，当 chart 安装到 Kubernetes 中后就会创建一个 release，每次更新该 chart 的配置并执行 <code>helm upgrade</code>， release 的版本数就会加 1。同一个 chart 可以部署多次。</p>
<h2 id="安装-Helm"><a href="#安装-Helm" class="headerlink" title="安装 Helm"></a>安装 Helm</h2><p><strong>前提要求</strong></p>
<ul>
<li>Kubernetes 1.5 以上版本</li>
<li>执行 helm 命令的主机可以访问到 Kubernetes 集群</li>
</ul>
<p>请参考 <a target="_blank" rel="noopener" href="https://helm.sh/docs/intro/install/">Helm 官方文档</a>安装，对于 Mac 用户可以直接运行 <code>brew install helm</code> 安装即可。</p>
<h2 id="Chart-说明"><a href="#Chart-说明" class="headerlink" title="Chart 说明"></a>Chart 说明</h2><p>下面我们将一步步创建一个 chart 来说明其组织结构。</p>
<p>首先使用 <code>helm create mychart</code> 创建一个名为 <code>mychart</code> 的示例，我们再使用 <code>tree mychart</code> 命令看一下 chart 的目录结构。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mychart
├── Chart.yaml
├── charts <span class="token comment"># 该目录保存其他依赖的 chart（子 chart）</span>
├── templates <span class="token comment"># chart 配置模板，用于渲染最终的 Kubernetes YAML 文件</span>
│   ├── NOTES.txt <span class="token comment"># 用户运行 helm install 时候的提示信息</span>
│   ├── _helpers.tpl <span class="token comment"># 用于创建模板时的帮助类</span>
│   ├── deployment.yaml <span class="token comment"># Kubernetes deployment 配置</span>
│   ├── ingress.yaml <span class="token comment"># Kubernetes ingress 配置</span>
│   ├── service.yaml <span class="token comment"># Kubernetes service 配置</span>
│   ├── serviceaccount.yaml <span class="token comment"># Kubernetes serviceaccount 配置</span>
│   └── tests
│       └── test-connection.yaml
└── values.yaml <span class="token comment"># 定义 chart 模板中的自定义配置的默认值，可以在执行 helm install 或 helm update 的时候覆盖</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>以上仅为 helm 为我们自动创建的目录结构，我们还可以在 <code>templates</code> 目录加其他 Kubernetes 对象的配置，比如 <code>ConfigMap</code>、<code>DaemonSet</code> 等。</p>
<p>我们查看下使用 <code>helm create</code> 命令自动生成的 <code>templates/service.yaml</code> 文件。</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> include "mychart.fullname" . <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> include "mychart.labels" . <span class="token punctuation">|</span> nindent 4 <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> .Values.service.type <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> .Values.service.port <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> http
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">name</span><span class="token punctuation">:</span> http
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> include "mychart.selectorLabels" . <span class="token punctuation">|</span> nindent 4 <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以看到其中有很多<code>{{ }}</code> 包围的字段，这是使用的 <a target="_blank" rel="noopener" href="https://golang.org/pkg/text/template/">Go template</a> 创建的自定义字段，其中 <code>mychart</code> 开头的都是在 <code>_helpers.tpl</code> 中生成的定义。</p>
<p>例如 <code>_helpers.tpl</code> 中对 <code>chart.fullname</code> 的定义：</p>
<pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token comment">/*
Create a default fully qualified app name.
We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).
If release name contains chart name it will be used as a full name.
*/</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> define <span class="token string">"mychart.fullname"</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> <span class="token keyword">if</span> <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>fullnameOverride <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>fullnameOverride <span class="token operator">|</span> trunc <span class="token number">63</span> <span class="token operator">|</span> trimSuffix <span class="token string">"-"</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> $name <span class="token operator">:=</span> <span class="token keyword">default</span> <span class="token punctuation">.</span>Chart<span class="token punctuation">.</span>Name <span class="token punctuation">.</span>Values<span class="token punctuation">.</span>nameOverride <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> <span class="token keyword">if</span> contains $name <span class="token punctuation">.</span>Release<span class="token punctuation">.</span>Name <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> <span class="token punctuation">.</span>Release<span class="token punctuation">.</span>Name <span class="token operator">|</span> trunc <span class="token number">63</span> <span class="token operator">|</span> trimSuffix <span class="token string">"-"</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> <span class="token keyword">else</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> printf <span class="token string">"%s-%s"</span> <span class="token punctuation">.</span>Release<span class="token punctuation">.</span>Name $name <span class="token operator">|</span> trunc <span class="token number">63</span> <span class="token operator">|</span> trimSuffix <span class="token string">"-"</span> <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> end <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> end <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">-</span> end <span class="token operator">-</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>我们再看下 <code>values.yaml</code> 文件中有这样的一段配置：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">service</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> ClusterIP
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>在使用 <code>helm install</code> 或 <code>helm update</code> 时，会渲染 <code>templates/service.yaml</code> 文件中的 <code>{{ .Values.service.type }}</code> 和 <code>{{ .Values.service.port }}</code> 的值。</p>
<h2 id="使用-Helm"><a href="#使用-Helm" class="headerlink" title="使用 Helm"></a>使用 Helm</h2><p>Helm 常用命令如下：</p>
<ul>
<li><code>helm create</code>：在本地创建新的 chart；</li>
<li><code>helm dependency</code>：管理 chart 依赖；</li>
<li><code>helm intall</code>：安装 chart；</li>
<li><code>helm lint</code>：检查 chart 配置是否有误；</li>
<li><code>helm list</code>：列出所有 release；</li>
<li><code>helm package</code>：打包本地 chart；</li>
<li><code>helm repo</code>：列出、增加、更新、删除 chart 仓库；</li>
<li><code>helm rollback</code>：回滚 release 到历史版本；</li>
<li><code>helm pull</code>：拉取远程 chart 到本地；</li>
<li><code>helm search</code>：使用关键词搜索 chart；</li>
<li><code>helm uninstall</code>：卸载 release；</li>
<li><code>helm upgrade</code>：升级 release；</li>
</ul>
<p>使用 <code>helm -h</code> 可以查看 Helm 命令行使用详情，请参考 <a target="_blank" rel="noopener" href="https://helm.sh/docs/helm/helm/">Helm 文档</a>。</p>
<h3 id="安装-chart"><a href="#安装-chart" class="headerlink" title="安装 chart"></a>安装 chart</h3><p>安装 chart 的命令格式为：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">helm <span class="token function">install</span> <span class="token punctuation">[</span>NAME<span class="token punctuation">]</span> <span class="token punctuation">[</span>CHART<span class="token punctuation">]</span> <span class="token punctuation">[</span>flags<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>示例：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 安装本地 chart</span>
helm <span class="token function">install</span> -f myvalues.yaml myredis ./redis
<span class="token comment"># 指定变量</span>
helm <span class="token function">install</span> --set <span class="token assign-left variable">name</span><span class="token operator">=</span>prod myredis ./redis
<span class="token comment"># 指定变量的值为 string 类型</span>
helm <span class="token function">install</span> --set-string <span class="token assign-left variable">long_int</span><span class="token operator">=</span><span class="token number">1234567890</span> myredis ./redis
<span class="token comment"># 指定引用的文件地址</span>
helm <span class="token function">install</span> --set-file <span class="token assign-left variable">my_script</span><span class="token operator">=</span>dothings.sh myredis ./redis
<span class="token comment"># 同时指定多个变量</span>
helm <span class="token function">install</span> --set <span class="token assign-left variable">foo</span><span class="token operator">=</span>bar --set <span class="token assign-left variable">foo</span><span class="token operator">=</span>newbar  myredis ./redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>其中：</p>
<ul>
<li><code>myvalues.yaml</code>：自定义变量配置文件；</li>
<li><code>myredis</code>：release 名称；</li>
<li><code>./redis</code>：本地的 chart 目录；</li>
</ul>
<p>Helm chart 安装后会转化成 Kubernetes 中的资源对象，生成一个 chart release，可以使用 <code>helm list</code> 命令查看。</p>
<p>关于 <code>helm intsall</code> 详细用法见：<a target="_blank" rel="noopener" href="https://helm.sh/docs/helm/helm_install/%E3%80%82">https://helm.sh/docs/helm/helm_install/。</a></p>
<h2 id="升级和回滚-chart"><a href="#升级和回滚-chart" class="headerlink" title="升级和回滚 chart"></a>升级和回滚 chart</h2><p>要想升级 chart 可以修改本地的 chart 配置并执行：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">helm upgrade <span class="token punctuation">[</span>RELEASE<span class="token punctuation">]</span> <span class="token punctuation">[</span>CHART<span class="token punctuation">]</span> <span class="token punctuation">[</span>flags<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>使用 <code>helm ls</code> 的命令查看当前运行的 chart 的 release 版本，并使用下面的命令回滚到历史版本：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">helm rollback <span class="token operator">&lt;</span>RELEASE<span class="token operator">&gt;</span> <span class="token punctuation">[</span>REVISION<span class="token punctuation">]</span> <span class="token punctuation">[</span>flags<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="卸载-chart"><a href="#卸载-chart" class="headerlink" title="卸载 chart"></a>卸载 chart</h3><p>要想卸载 chart 可以使用下面的命令。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">helm uninstall RELEASE_NAME <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>flags<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://golang.org/pkg/text/template/">Go template - golang.org</a></li>
<li><a target="_blank" rel="noopener" href="https://helm.sh/docs/chart_template_guide/getting_started/">Getting Started - helm.sh</a></li>
<li><a target="_blank" rel="noopener" href="https://whmzsu.github.io/helm-doc-zh-cn/">Helm 用户指南 - whmzsu.github.io</a></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:bohemia0508@gmail.com">Skykens</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://skykens.github.io/rong-qi-xiang-guan-ming-ci-jie-shi/">https://skykens.github.io/rong-qi-xiang-guan-ming-ci-jie-shi/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-6oqzgq.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021-5-14-qing-chong-xin-lian-jie/"><img class="prev-cover" src="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-r2o9v7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">2021-5-14 晴. 重新连接</div></div></a></div><div class="next-post pull-right"><a href="/c-bian-yi-huan-jing-bu-shu/"><img class="next-cover" src="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-0q5yq0.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">C++后台开发环境部署</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Skykens</div><div class="author-info__description"> 分享后端开发相关知识、复盘、个人观点，愿君喜欢。</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">99</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">17</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/skykens"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/skykens" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="skykens:470798745@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">2020年,关键词:疫情,求职,进入腾讯
2021年,关键词:入职,异地,迷茫
2022年,学习,改变,写作自由,离开
2023年,关键词:新城市,思念,深耕,代码自由</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A"><span class="toc-number">1.</span> <span class="toc-text">容器相关名词解释</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Helm-%E5%92%8C-Chart"><span class="toc-number">1.1.</span> <span class="toc-text">Helm 和 Chart</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Helm"><span class="toc-number">1.2.</span> <span class="toc-text">安装 Helm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chart-%E8%AF%B4%E6%98%8E"><span class="toc-number">1.3.</span> <span class="toc-text">Chart 说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Helm"><span class="toc-number">1.4.</span> <span class="toc-text">使用 Helm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-chart"><span class="toc-number">1.4.1.</span> <span class="toc-text">安装 chart</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E5%92%8C%E5%9B%9E%E6%BB%9A-chart"><span class="toc-number">1.5.</span> <span class="toc-text">升级和回滚 chart</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD-chart"><span class="toc-number">1.5.1.</span> <span class="toc-text">卸载 chart</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">1.6.</span> <span class="toc-text">参考</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/undefined-symbol-ke-neng-de-wen-ti/" title="undefined symbol 可能的问题"><img src="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-zxg76o.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="undefined symbol 可能的问题"/></a><div class="content"><a class="title" href="/undefined-symbol-ke-neng-de-wen-ti/" title="undefined symbol 可能的问题">undefined symbol 可能的问题</a><time datetime="2023-03-23T22:01:00.000Z" title="Created 2023-03-23 22:01:00">2023-03-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/na-xie-kai-xiang-ji-yong-de-kai-fa-huan-jing/" title="开箱即用的开发环境"><img src="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-6oqzgq.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="开箱即用的开发环境"/></a><div class="content"><a class="title" href="/na-xie-kai-xiang-ji-yong-de-kai-fa-huan-jing/" title="开箱即用的开发环境">开箱即用的开发环境</a><time datetime="2023-03-23T00:16:00.000Z" title="Created 2023-03-23 00:16:00">2023-03-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/man-tan-vcs-zai-you-xi-zhong-de-shi-yong/" title="漫谈VCS在游戏中的使用"><img src="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-6oqzgq.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="漫谈VCS在游戏中的使用"/></a><div class="content"><a class="title" href="/man-tan-vcs-zai-you-xi-zhong-de-shi-yong/" title="漫谈VCS在游戏中的使用">漫谈VCS在游戏中的使用</a><time datetime="2023-03-18T00:01:00.000Z" title="Created 2023-03-18 00:01:00">2023-03-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/guan-yu-tong-guo-cp-fu-gai-so-dao-zhi-coredump/" title="关于通过cp覆盖so导致coredump"><img src="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-dgpvzl.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于通过cp覆盖so导致coredump"/></a><div class="content"><a class="title" href="/guan-yu-tong-guo-cp-fu-gai-so-dao-zhi-coredump/" title="关于通过cp覆盖so导致coredump">关于通过cp覆盖so导致coredump</a><time datetime="2021-07-08T10:20:27.000Z" title="Created 2021-07-08 10:20:27">2021-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/kubernetes-xue-xi-bi-ji-0-cong-ling-da-jian-k8s-ji-qun/" title="Kubernetes学习笔记0-从零搭建k8s集群"><img src="https://raw.githubusercontent.com/skykens/pubPhotos/main/wallhaven-5dx6w7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes学习笔记0-从零搭建k8s集群"/></a><div class="content"><a class="title" href="/kubernetes-xue-xi-bi-ji-0-cong-ling-da-jian-k8s-ji-qun/" title="Kubernetes学习笔记0-从零搭建k8s集群">Kubernetes学习笔记0-从零搭建k8s集群</a><time datetime="2021-06-30T15:20:27.000Z" title="Created 2021-06-30 15:20:27">2021-06-30</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2023 By Skykens</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'AmW91X1WNrKyj5Y7sCfuj4v3-gzGzoHsz',
      appKey: '4SoS7HRckX0IlgpKVJcVSpsP',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>